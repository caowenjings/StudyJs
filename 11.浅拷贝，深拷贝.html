<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  <title>homework-web</title>
  <style type="text/css">

  </style>
</head>

<body>

  <div id="demo">
  </div>

  <script>
    // 1.浅拷贝
    function copy() {
      let o = {
        id: 1,
        name: 'cao',
        msg: { age: 18 },
      }
      let obj = {};
      for (var k in o) {//浅拷贝
        obj[k] = o[k]
      }
      // Object.assign(obj, o);//浅拷贝

      o.msg.age = 20;
      o.name = "cao1";

      console.log(obj);
      console.log(o);
    }
    // copy();

    function copy1() {
      b = a.slice();
      a[0] = 2;
      console.log(a, b);
    }
    //copy1()

    //2.深拷贝
    function deepCopy() {
      let o = {
        id: 1,
        name: 'cao',
        msg: { age: 18 },
        num: [1, 3, 4]
      }
      let obj = {};

      obj = JSON.parse(JSON.stringify(o))
      o.msg.age = 20;
      o.name = "cao1";

      console.log(obj);
      console.log(o);
    }
    // deepCopy();


    function deepCopy1() {
      let o = {
        id: 1,
        name: 'cao',
        msg: { age: 18, other: { color: "red" } },
        num: [1, 3, 4]
      }
      let obj = {};

      function deep(oldObj, newObj) {
        for (var k in oldObj) {
          var item = oldObj[k];
          if (item instanceof Array) {//判断是否为数组
            newObj[k] = [];
            newObj[k] = deep(item, newObj[k]);
          } else if (item instanceof Object) {//判断是否为对象
            newObj[k] = {};
            newObj[k] = deep(item, newObj[k])
          } else {//基本数据类型
            newObj[k] = item;
          }
        }
        return newObj
      }
      deep(o, obj)
      o.msg.age = 20;
      o.name = "cao1";

      console.log(obj);
      console.log(o);

    }
    //deepCopy1()

    function deepCopy2() {
      let a = [0, 1, [2, 3], 4];
      b = $.extend(true, [], a);
      a[0] = 1;
      a[2][0] = 1;
      console.log(a, b);
    }
    deepCopy2()








  </script>

</body>

</html>